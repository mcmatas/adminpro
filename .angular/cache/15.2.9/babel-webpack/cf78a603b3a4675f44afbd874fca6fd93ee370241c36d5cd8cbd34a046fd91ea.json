{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { delay } from 'rxjs';\nlet MedicosComponent = class MedicosComponent {\n  constructor(medicoService, modalImagenService, busquedasService) {\n    this.medicoService = medicoService;\n    this.modalImagenService = modalImagenService;\n    this.busquedasService = busquedasService;\n    this.medicos = [];\n    this.cargando = true;\n  }\n  ngOnDestroy() {\n    // Creamos esto para que cuando cerremos o hagamos refresh no siga suscrito\n    this.imgSubs.unsubscribe();\n  }\n  ngOnInit() {\n    this.cargarMedicos();\n    // Nos suscribimos al observable de modal-imagen.service.ts\n    this.imgSubs = this.imgSubs = this.modalImagenService.nuevaImagen.pipe(\n    // AÃ±adimos un delay para dar tiempo al servidor de guardar la imagen nueva\n    delay(100)).subscribe(img => this.cargarMedicos());\n  }\n  cargarMedicos() {\n    this.cargando = true;\n    this.medicoService.cargarMedicos().subscribe(medicos => {\n      this.cargando = false;\n      this.medicos = medicos;\n    });\n  }\n  abrirModal(medico) {\n    this.modalImagenService.abrirModal('medicos', medico._id, medico.img);\n  }\n  buscar(termino) {\n    if (termino.length === 0) {\n      return this.cargarMedicos();\n    }\n    this.busquedasService.buscar('medicos', termino).subscribe(resultados => {\n      this.medicos = resultados;\n    });\n  }\n};\nMedicosComponent = __decorate([Component({\n  selector: 'app-medicos',\n  templateUrl: './medicos.component.html',\n  styles: []\n})], MedicosComponent);\nexport { MedicosComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}